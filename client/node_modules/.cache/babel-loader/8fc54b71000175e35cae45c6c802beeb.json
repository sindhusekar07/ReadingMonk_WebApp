{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SINDHUSEKAR\\\\reading-monk\\\\client\\\\src\\\\Scripts\\\\ShowReqTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Table.css';\nimport PrimaryLink from '../axios/primary_link';\n\nconst ShowReqTable = () => {\n  const [books, setbooks] = useState([]);\n  const url = '/books/getReqBooksByUserId/' + localStorage.getItem(\"userid\");\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = async () => {\n    const response = await PrimaryLink.get(url, {\n      headers: {\n        'x-access-token': localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      // check if the data is populated\n      console.log(response.data);\n      console.log(localStorage.getItem(\"userid\"));\n      console.log(localStorage.getItem(url));\n      setbooks(response.data); // you tell it that you had the result\n    });\n  };\n\n  const removeData = book_id => {\n    const delUrl = '/books/' + book_id;\n    console.log(\"book_id\", book_id);\n    PrimaryLink.delete(delUrl, {\n      headers: {\n        'x-access-token': localStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      const del = books.filter(book => book_id !== book.book_id);\n      setbooks(del);\n      window.location.reload();\n    });\n  };\n\n  const renderHeader = () => {\n    let headerElement = ['Book', 'Author(s)', 'Publication', 'In Language', 'No. of pages', 'Publisher', 'Location', 'Delete?'];\n    return headerElement.map((key, index) => {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 20\n        }\n      }, key.toUpperCase());\n    });\n  };\n\n  const renderBody = () => {\n    return books && books.map(({\n      _id,\n      name,\n      author,\n      publication_year,\n      in_language,\n      number_of_pages,\n      publisher,\n      book_location\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }\n      }, author), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }\n      }, publication_year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }\n      }, in_language), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }\n      }, number_of_pages), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }\n      }, publisher), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }\n      }, book_location), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"del\",\n        onClick: () => removeData(_id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }\n      }, \"Delete\")));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mytable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    id: \"book\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, renderHeader())), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, renderBody()))));\n};\n\nexport default ShowReqTable;","map":{"version":3,"sources":["C:/Users/SINDHUSEKAR/reading-monk/client/src/Scripts/ShowReqTable.js"],"names":["React","useState","useEffect","PrimaryLink","ShowReqTable","books","setbooks","url","localStorage","getItem","getData","response","get","headers","then","console","log","data","removeData","book_id","delUrl","delete","res","del","filter","book","window","location","reload","renderHeader","headerElement","map","key","index","toUpperCase","renderBody","_id","name","author","publication_year","in_language","number_of_pages","publisher","book_location"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport './Table.css'\r\nimport PrimaryLink from '../axios/primary_link'\r\n\r\n\r\nconst ShowReqTable = () => {\r\n    const [books, setbooks] = useState([])\r\n    \r\n    const url = '/books/getReqBooksByUserId/'+ localStorage.getItem(\"userid\")\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    const getData = async () => {\r\n\r\n        const response = await PrimaryLink.get(url, \r\n            {headers:{'x-access-token':localStorage.getItem(\"token\")}})\r\n              .then((response) => {\r\n                // check if the data is populated\r\n                console.log(response.data);\r\n                console.log(localStorage.getItem(\"userid\"));\r\n                console.log(localStorage.getItem(url));\r\n                setbooks(response.data)\r\n                // you tell it that you had the result\r\n              });\r\n        \r\n    }\r\n\r\n    const removeData = (book_id) => {\r\n        const delUrl = '/books/'+book_id\r\n        console.log(\"book_id\",book_id)\r\n        PrimaryLink.delete(delUrl ,\r\n        {headers:{'x-access-token':localStorage.getItem(\"token\")}})\r\n        .then(res => {\r\n            const del = books.filter(book => book_id !== book.book_id);\r\n            setbooks(del);\r\n            window.location.reload();\r\n            \r\n        })\r\n    }\r\n\r\n    const renderHeader = () => {\r\n        let headerElement = ['Book', 'Author(s)', 'Publication', 'In Language', 'No. of pages','Publisher','Location','Delete?']\r\n\r\n        return headerElement.map((key, index) => {\r\n            return <th key={index}>{key.toUpperCase()}</th>\r\n        })\r\n    }\r\n\r\n    const renderBody = () => {\r\n        return books && books.map(({ _id,name, author, publication_year, in_language,number_of_pages,publisher,book_location }) => {\r\n            return (\r\n                <tr key={_id}>\r\n                    <td>{name}</td>\r\n                    <td>{author}</td>\r\n                    <td>{publication_year}</td>\r\n                    <td>{in_language}</td>\r\n                    <td>{number_of_pages}</td>\r\n                    <td>{publisher}</td>\r\n                    <td>{book_location}</td>\r\n                    <td>\r\n                        <button className=\"del\" onClick={() => removeData(_id)}>Delete</button>\r\n                    </td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\"> \r\n        <div className=\"mytable\"> \r\n            <table id=\"book\">\r\n                <thead>\r\n                    <tr>{renderHeader()}</tr>\r\n                </thead>\r\n                <tbody>\r\n                    {renderBody()}\r\n                </tbody>\r\n            </table>\r\n        </div>   \r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default ShowReqTable"]},"metadata":{},"sourceType":"module"}